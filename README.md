# π“μ‹¤λ¬Όκ°€λ§Ήμ  μ—°λ™ κ°€μ΄λ“

- [μ‹¤λ¬Όκ°€λ§Ήμ ](#μ‹¤λ¬Όκ°€λ§Ήμ -μ—°λ™-κ°€μ΄λ“)   
- [μ»¨ν…μΈ κ°€λ§Ήμ ](../../../guide-2/#μ»¨ν…μΈ κ°€λ§Ήμ -μ—°λ™-κ°€μ΄λ“)   
- [λ‹΄λ‹Ήμ μ •λ³΄](../../../Responsibility/#λ‹΄λ‹Ήμ-μ •λ³΄)   

---

## λ©μ°¨
- [μ—…λ°μ΄νΈ](#μ—…λ°μ΄νΈ)   
- [ν¬μΈνΈ μ „ν™ - μΈμ¦](#ν¬μΈνΈμ „ν™---μΈμ¦)   
- [ν¬μΈνΈ μ „ν™ - λ¬΄μΈμ¦](#ν¬μΈνΈ-μ „ν™---λ¬΄μΈμ¦)   
- [ν¬μΈνΈ μ „ν™ ν›„](#ν¬μΈνΈ-μ „ν™-ν›„)   

<br/>

## μ—…λ°μ΄νΈ
- 21.12.17 μ—°λ™κ°€μ΄λ“ μ μ‘
- 22.02.04 λ¬΄μΈμ¦μ΅°ν μ¶”κ°€

<br/>

## ν¬μΈνΈμ „ν™ - μΈμ¦

#### κ²°μ νμ—… νΈμ¶

JSλ¥Ό ν†µν• νμ—…μ°½ μ¤ν” λ°©μ‹μ…λ‹λ‹¤.

|μ„λ²„|URL|μ „μ†΅ λ°©λ²•|
|--|------|:---:|
|κ°λ°|http://dev.pointpay.im/pointhub/direct|GET|
|μƒμ©|https://ssl.pointpay.im/pointhub/direct|GET|


|μ „λ‹¬ νλΌλ―Έν„°|λ‚΄μ©|ν•„μμ—¬λ¶€|
|------|---|---|
|`a_code`|λ§¤μ²΄μ½”λ“(ν¬μΈνΈνμ΄ λ°κΈ‰μ•„μ΄λ””)|O|
|`user_id`|λ§¤μ²΄ νμ›μ•„μ΄λ”” (λ΅κ·ΈμΈμ„ μ™„λ£ν• νμ› λ€μƒ)|O|
|`add_param`|μ—…μ²΄ μ”μ²­ νλΌλ―Έν„° (ν•„μ”μ‹ μ¶”κ°€)||


 _*λ¨λ“  νλΌλ―Έν„°λ…μ€ μ†λ¬Έμλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤._


 **μμ‹)**
 ```js
 window.open(
 'https://ssl.pointpay.im/pointhub/direct?a_code=λ§¤μ²΄μ½”λ“&user_id=λ§¤μ²΄νμ›μ•„μ΄λ””', 
 'cert2_popup', 'width=765, height=895, resizable=auto, scrollbars=yes, status=no'
 );
 ```
 
<br/>


## ν¬μΈνΈ μ „ν™ - λ¬΄μΈμ¦

### 1. μ΅°ννμ—… νΈμ¶

JSλ¥Ό ν†µν• νμ—…μ°½ μ¤ν” λ°©μ‹μ…λ‹λ‹¤.

|μ„λ²„|URL|μ „μ†΅ λ°©λ²•|
|--|------|:---:|
|κ°λ°|http://dev.pointpay.im/pointhub/direct_ci|POST|
|μƒμ©|https://ssl.pointpay.im/pointhub/direct_ci|POST|

|μ „λ‹¬ νλΌλ―Έν„°|λ‚΄μ©|ν•„μμ—¬λ¶€|
|------|---|---|
|`a_code`|λ§¤μ²΄μ½”λ“(ν¬μΈνΈνμ΄ λ°κΈ‰μ•„μ΄λ””)|O|
|`user_id`|λ§¤μ²΄ νμ›μ•„μ΄λ”” (λ΅κ·ΈμΈμ„ μ™„λ£ν• νμ› λ€μƒ)|O|
|`add_param`|μ—…μ²΄ μ”μ²­ νλΌλ―Έν„° (ν•„μ”μ‹ μ¶”κ°€)|

 _*λ¨λ“  νλΌλ―Έν„°λ…μ€ μ†λ¬Έμλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤._
 
  **μμ‹)**
```js
function onSubmit(){
    var pay_form = document.Form;
    var url = "https://ssl.pointpay.im/pointhub/direct_ci";
    window.open("" ,"Form", 
    "width=765, height=895, resizable=auto, scrollbars=yes, status=no"); 
    pay_form.action =url; 
    pay_form.method="post";
    pay_form.target="Form";
    pay_form.submit();
}
```
```html
<form name="Form">
    <input type="hidden" name="a_code" value="pointpay" />
    <input type="hidden" name="user_id" value="user_id" />
    <input type="hidden" name="add_param" value="add_param" />
</form>
```

<br/>

### 2. μ„λ²„κ°„ μ—°λ™(S2S)

κ³ κ° μ¤‘μ”μ •λ³΄λ” μ„λ²„κ°„ μ—°λ™μ„ ν†µν•΄ μ „λ‹¬ λ°›μµλ‹λ‹¤.

#### URL : κ°€λ§Ήμ μ—μ„ μ•λ ¤μ¤€ URL
### REQUEST
|νλΌλ―Έν„°|λ‚΄μ©|ν•„μμ—¬λ¶€|
|------|---|---|
|`token`|μ—…μ²΄ μ „λ‹¬ keyκ°’(md5μ•”νΈν™”)|O|
|`en_user_id`|κ³ κ°μ•„μ΄λ””(md5μ•”νΈν™”)|O|

> token κ°’κ³Ό en_user_id κ°’μΌλ΅ μ ν¨μ„±μ²΄ν¬λ¥Ό ν•΄μ£Όμ„Έμ”.

### RESPONSE
> time out : 5μ΄
>
|νλΌλ―Έν„°|λ‚΄μ©|ν•„μμ—¬λ¶€|μμ‹|
|------|---|---|---|
|`ret_code`|λ¦¬ν„΄μ½”λ“|O|μ„±κ³µ : 201 / μ‹¤ν¨: 202|
|`ret_msg`|λ¦¬ν„΄λ©”μ‹μ§€||μ‹¤ν¨μΌκ²½μ° μ „λ‹¬|
|`user_ci`|κ³ κ° CI|O||
|`user_name`|κ³ κ°λ…|O|λ°•μ£Όμ(UTF-8)|
|`user_phone`|κ³ κ°ν΄λ€ν°λ²νΈ|O|01012345678|


> κ³ κ° μ¤‘μ”μ •λ³΄κ°’μ΄ λ„μ–΄μ¤μ§€μ•κ±°λ‚ 202μ‘λ‹µμ„ λ°›μΌλ©΄ ν¬μΈνΈ μ „ν™μ΄λμ§€ μ•μµλ‹λ‹¤.

<br/>

## ν¬μΈνΈ μ „ν™ ν›„

μ „ν™ ν›„ λ§¤μ²΄ ν¬μΈνΈμ λ¦½ μ²λ¦¬(ν¬μΈνΈ, μΊμ‹ λ“±)λ¥Ό μ„ν• RETURN URLμ„
[λ‹΄λ‹Ήμ](../../../Responsibility/#λ‹΄λ‹Ήμ-μ •λ³΄) μ—κ² μ „λ‹¬ν•΄μ£Όμ‹λ©΄ λ©λ‹λ‹¤.


 **μμ‹)**
```
http://λ§¤μ²΄λ„λ©”μΈ/event/result.php
```

|μ „λ‹¬ νλΌλ―Έν„°|μ„¤λ…|νƒ€μ…|μμ‹|
|------|--------|------|------|
|`rw_pay_type`|κ²°μ κµ¬λ¶„|Varchar|KT|
|`rw_user_id`|λ§¤μ²΄ νμ›μ•„μ΄λ””|Varchar|pointpay
|`rw_price`|μ „ν™ν¬μΈνΈ|Int|10000
|`rw_reg_datetime`|κ±°λμ‹κ°„|Date|2021-12-17 11:25:36
|`rw_a_code`|κ±°λλ§¤μ²΄μ½”λ“|Varchar|ν¬μΈνΈνμ΄ λ°κΈ‰μ•„μ΄λ””
|`rw_orderno`|κ±°λλ²νΈ|Varchar|ME2021121733235510625855
|`utc_code`|λ§¤μ²΄ μ”μ²­νλΌλ―Έν„°|Varchar|ETC

 _*λ¨λ“  νλΌλ―Έν„°λ…μ€ μ†λ¬Έμλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤._

### μƒνƒ λ¦¬ν„΄

κ²°κ³Ό μ‘λ‹µμ½”λ“λ¥Ό Textκ°’μΌλ΅ λ°ν™ν•΄μ£Όμ„Έμ”.   
> μ‘λ‹µμΌλ΅ JSμ alert μ‚¬μ©μ‹ ERRORκ°€λ°μƒν•λ‹, μ°Έκ³ ν•΄μ£Όμ„Έμ”.    
   
</br>

#### μ λ¦½ μ„±κ³µμΈ κ²½μ° μ‘λ‹µμ½”λ“
```
201
```

#### μ λ¦½ μ‹¤ν¨μΈ κ²½μ° μ‘λ‹µμ½”λ“ 

μ λ¦½ μ‹¤ν¨μΈ κ²½μ° μ‹¤ν¨μ‚¬μ λ¥Ό κµ¬λ¶„μ "|-|" (νμ΄ν”„λΌμΈ ν•μ΄ν” νμ΄ν”„λΌμΈ)κ³Ό ν•¨κ» μ‘μ„±ν•΄μ£Όμ„Έμ”.   
```
202|-|κ±°λλ²νΈ μ¤‘λ³µ
202|-|κ±°λλ²νΈ μ¤‘λ³µ   
202|-|μ•„μ΄λ”” μ—†μ
```



